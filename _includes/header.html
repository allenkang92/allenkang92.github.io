<header>
  <div class="blog-title">
    <h1>{{ site.title }}</h1>
    {% if site.description %}
      <p>{{ site.description }}</p>
    {% endif %}
  </div>
  
  <nav>
    <ul>
      {% for item in site.navigation %}
        <li><a href="{{ site.baseurl }}{{ item.url }}">{{ item.title }}</a></li>
      {% endfor %}
    </ul>
  </nav>

  <div class="search-container">
    <input type="text" id="search-input" placeholder="검색어를 입력하세요">
    <div id="search-results"></div>
  </div>

  <div class="categories">
    <h2>Blog Categories:</h2>
    <select id="category-select">
      <option value="all">All Categories</option>
      {% for category in site.category_structure %}
        <option value="{{ category[0] }}">{{ category[1].title }}</option>
      {% endfor %}
    </select>
    <ul id="category-list">
      {% for category in site.category_structure %}
        <li>
          <a href="{{ site.baseurl }}/categories/{{ category[0] }}/">
            {{ category[1].title }}
          </a>
          {% if category[1].subcategories.size > 0 %}
            <ul>
              {% for subcategory in category[1].subcategories %}
                <li>
                  <a href="{{ site.baseurl }}/categories/{{ category[0] }}/{{ subcategory | slugify }}/">
                    {{ subcategory | capitalize | replace: '_', ' ' }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </div>

  {% if page.title == 'Achievements' or page.url contains '/achievements/' %}
    {% if site.achievement_categories.size > 0 %}
      <div class="achievement-categories">
        <h2>Achievement Categories:</h2>
        <ul>
          {% for category in site.achievement_categories %}
            <li>
              <a href="{{ site.baseurl }}/achievements/{{ category[0] }}/">
                {{ category[1].title }}
              </a>
              {% if category[1].subcategories.size > 0 %}
                <ul>
                  {% for subcategory in category[1].subcategories %}
                    <li>
                      <a href="{{ site.baseurl }}/achievements/{{ category[0] }}/{{ subcategory | slugify }}/">
                        {{ subcategory | capitalize | replace: '_', ' ' }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endif %}
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var categorySelect = document.getElementById('category-select');
  var categoryList = document.getElementById('category-list');

  if (categorySelect && categoryList) {
    if (window.location.pathname.includes('/posts/') || document.body.classList.contains('post-template')) {
      categorySelect.style.display = 'block';
      categoryList.style.display = 'none';
    } else {
      categorySelect.style.display = 'none';
      categoryList.style.display = 'block';
    }

    categorySelect.addEventListener('change', function() {
      var selectedCategory = this.value;
      var posts = document.getElementsByClassName('post-preview');
      
      for (var i = 0; i < posts.length; i++) {
        if (selectedCategory === 'all' || posts[i].getAttribute('data-category') === selectedCategory) {
          posts[i].style.display = 'block';
        } else {
          posts[i].style.display = 'none';
        }
      }
    });
  }
});
</script>