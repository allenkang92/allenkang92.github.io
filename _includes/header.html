<header>
  <div class="blog-title">
    <h1>{{ site.title }}</h1>
    {% if site.description %}
      <p>{{ site.description }}</p>
    {% endif %}
  </div>
  
  <nav>
    <ul>
      {% for item in site.navigation %}
        <li><a href="{{ site.baseurl }}{{ item.url }}">{{ item.title }}</a></li>
      {% endfor %}
    </ul>
  </nav>

  <div class="search-container">
    <input type="text" id="search-input" placeholder="검색어를 입력하세요">
    <div id="search-results"></div>
  </div>

  <div class="categories">
    <h2>Categories:</h2>
    <select id="category-select" onchange="filterCategories()">
      <option value="all">All Categories</option>
      {% for category in site.category_structure %}
        <option value="{{ category[0] }}">{{ category[1].title }}</option>
      {% endfor %}
    </select>
    <ul id="category-list">
      {% for category in site.category_structure %}
        <li data-category="{{ category[0] }}">
          <a href="{{ site.baseurl }}/categories/{{ category[0] }}/">
            {{ category[1].title }}
          </a>
          {% if category[1].subcategories.size > 0 %}
            <ul>
              {% for subcategory in category[1].subcategories %}
                <li>
                  <a href="{{ site.baseurl }}/categories/{{ category[0] }}/{{ subcategory | slugify }}/">
                    {{ subcategory | capitalize | replace: '_', ' ' }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </div>
</header>

<script>
function filterCategories() {
  var select = document.getElementById('category-select');
  var selectedCategory = select.value;
  var categoryItems = document.querySelectorAll('#category-list > li');
  
  categoryItems.forEach(function(item) {
    if (selectedCategory === 'all' || item.dataset.category === selectedCategory) {
      item.style.display = 'block';
    } else {
      item.style.display = 'none';
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  var pathname = window.location.pathname;
  var categorySelect = document.getElementById('category-select');
  var categoryList = document.getElementById('category-list');

  if (pathname.includes('/posts/') || pathname.includes('/categories/') || document.body.classList.contains('post-template')) {
    categorySelect.style.display = 'block';
    categoryList.style.display = 'none';
  } else {
    categorySelect.style.display = 'none';
    categoryList.style.display = 'block';
  }
});
</script>